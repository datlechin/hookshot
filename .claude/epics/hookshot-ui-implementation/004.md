---
name: Endpoint Management
status: open
created: 2026-01-30T08:03:38Z
updated: 2026-01-30T08:03:38Z
github: [To be updated during sync]
depends_on: [002, 003]
parallel: true
conflicts_with: [005]
---

# Task: Endpoint Management

## Description

Implement all endpoint-related UI components and functionality: endpoint list in sidebar, endpoint creation, deletion with confirmation, and copy-to-clipboard for webhook URLs. This enables users to manage multiple webhook endpoints.

**Scope:**
- Endpoint list rendering in sidebar
- Create endpoint button and flow
- Delete endpoint with confirmation dialog
- Copy webhook URL to clipboard
- Empty state for no endpoints
- Visual feedback for actions (loading, success, error)

## Acceptance Criteria

- [ ] Endpoint list displays all endpoints with UUIDs
- [ ] "Create Endpoint" button creates new endpoint via API
- [ ] New endpoint appears in list immediately
- [ ] Webhook URL is copyable with one click
- [ ] Copy shows visual confirmation (checkmark, "Copied!")
- [ ] Delete button shows confirmation dialog
- [ ] Deleting endpoint removes it from list and backend
- [ ] Selected endpoint is visually highlighted
- [ ] Empty state shows when no endpoints exist
- [ ] Loading state shows during API calls
- [ ] Error messages display on API failures

## Technical Details

### Components to Create

1. **EndpointList** (`components/endpoint/EndpointList.tsx`)
   ```typescript
   export function EndpointList() {
     const { endpoints, loading, createEndpoint, deleteEndpoint } = useEndpoints();
     const [selected, setSelected] = useState<string | null>(null);

     if (loading) return <LoadingSpinner />;
     if (endpoints.length === 0) return <EmptyState />;

     return (
       <div className="space-y-2 p-4">
         {endpoints.map(endpoint => (
           <EndpointItem
             key={endpoint.id}
             endpoint={endpoint}
             selected={selected === endpoint.id}
             onSelect={() => setSelected(endpoint.id)}
             onDelete={() => deleteEndpoint(endpoint.id)}
           />
         ))}
       </div>
     );
   }
   ```

2. **EndpointItem** (`components/endpoint/EndpointItem.tsx`)
   ```typescript
   interface EndpointItemProps {
     endpoint: Endpoint;
     selected: boolean;
     onSelect: () => void;
     onDelete: () => void;
   }

   export function EndpointItem({ endpoint, selected, onSelect, onDelete }: EndpointItemProps) {
     const [showConfirm, setShowConfirm] = useState(false);

     return (
       <div
         className={`p-3 rounded-lg cursor-pointer ${
           selected ? 'bg-surface-hover' : 'hover:bg-surface'
         }`}
         onClick={onSelect}
       >
         <div className="flex items-center justify-between">
           <div className="flex-1 min-w-0">
             <p className="text-sm font-medium text-text-primary truncate">
               {endpoint.id}
             </p>
             <p className="text-xs text-text-secondary">
               {new Date(endpoint.created_at).toLocaleDateString()}
             </p>
           </div>
           <button
             onClick={(e) => {
               e.stopPropagation();
               setShowConfirm(true);
             }}
             className="ml-2 text-text-tertiary hover:text-accent-red"
           >
             <TrashIcon className="w-4 h-4" />
           </button>
         </div>

         {showConfirm && (
           <ConfirmDialog
             title="Delete Endpoint?"
             message="This will delete all requests for this endpoint."
             onConfirm={onDelete}
             onCancel={() => setShowConfirm(false)}
           />
         )}
       </div>
     );
   }
   ```

3. **CreateEndpointButton** (`components/endpoint/CreateEndpointButton.tsx`)
   ```typescript
   export function CreateEndpointButton() {
     const { createEndpoint } = useEndpoints();
     const [loading, setLoading] = useState(false);

     async function handleCreate() {
       setLoading(true);
       try {
         await createEndpoint();
       } catch (error) {
         console.error('Failed to create endpoint:', error);
       } finally {
         setLoading(false);
       }
     }

     return (
       <button
         onClick={handleCreate}
         disabled={loading}
         className="px-4 py-2 bg-accent-blue text-white rounded-lg hover:bg-blue-600 disabled:opacity-50"
       >
         {loading ? 'Creating...' : 'Create Endpoint'}
       </button>
     );
   }
   ```

4. **CopyURLButton** (`components/endpoint/CopyURLButton.tsx`)
   ```typescript
   export function CopyURLButton({ endpointId }: { endpointId: string }) {
     const [copied, setCopied] = useState(false);
     const url = `${window.location.origin}/webhook/${endpointId}`;

     async function copyToClipboard() {
       try {
         await navigator.clipboard.writeText(url);
         setCopied(true);
         setTimeout(() => setCopied(false), 2000);
       } catch (error) {
         console.error('Failed to copy:', error);
       }
     }

     return (
       <button
         onClick={copyToClipboard}
         className="flex items-center gap-2 text-sm text-text-secondary hover:text-text-primary"
       >
         {copied ? (
           <>
             <CheckIcon className="w-4 h-4 text-accent-green" />
             <span>Copied!</span>
           </>
         ) : (
           <>
             <CopyIcon className="w-4 h-4" />
             <span>Copy URL</span>
           </>
         )}
       </button>
     );
   }
   ```

5. **ConfirmDialog** (`components/ui/ConfirmDialog.tsx`)
   ```typescript
   interface ConfirmDialogProps {
     title: string;
     message: string;
     onConfirm: () => void;
     onCancel: () => void;
   }

   export function ConfirmDialog({ title, message, onConfirm, onCancel }: ConfirmDialogProps) {
     return (
       <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
         <div className="bg-surface rounded-lg p-6 max-w-md w-full mx-4">
           <h3 className="text-lg font-semibold text-text-primary mb-2">{title}</h3>
           <p className="text-text-secondary mb-6">{message}</p>
           <div className="flex gap-3 justify-end">
             <button
               onClick={onCancel}
               className="px-4 py-2 text-text-primary hover:bg-surface-hover rounded"
             >
               Cancel
             </button>
             <button
               onClick={onConfirm}
               className="px-4 py-2 bg-accent-red text-white rounded hover:bg-red-600"
             >
               Delete
             </button>
           </div>
         </div>
       </div>
     );
   }
   ```

### User Flow

1. **Create Endpoint**
   - User clicks "Create Endpoint" in header
   - Button shows loading state
   - POST /api/endpoints called
   - New endpoint appears at top of sidebar
   - Endpoint is auto-selected
   - Success feedback shown (brief animation or toast)

2. **Copy URL**
   - User hovers over endpoint
   - Copy icon appears
   - User clicks copy
   - URL copied to clipboard
   - Visual feedback: checkmark + "Copied!" for 2 seconds

3. **Delete Endpoint**
   - User clicks trash icon
   - Confirmation dialog appears
   - User confirms deletion
   - DELETE /api/endpoints/:id called
   - Endpoint removed from list
   - If was selected, select first remaining endpoint

### Visual Design

**Endpoint Item:**
- Height: ~60px
- Padding: 12px
- Border radius: 8px
- Background: transparent → hover: surface → selected: surface-hover
- Text: UUID (14px, font-medium) + date (12px, secondary)
- Delete icon: Top-right, hover shows red

**Empty State:**
- Icon: Webhook icon (large, tertiary color)
- Title: "No endpoints yet"
- Description: "Create your first webhook endpoint to get started"
- Action: "Create Endpoint" button

## Dependencies

### Blocking Dependencies
- [ ] Task 002: Core Layout (Sidebar component)
- [ ] Task 003: API Client & Type Definitions (useEndpoints hook)

### External Dependencies
- [ ] Clipboard API (navigator.clipboard)
- [ ] Icons from lucide-react or similar

## Effort Estimate

- **Size:** Medium (M)
- **Hours:** 6-8 hours
- **Parallel:** true (can work alongside Task 005, 006)

**Breakdown:**
- EndpointList component: 1.5 hours
- EndpointItem component: 1.5 hours
- CreateEndpointButton: 1 hour
- CopyURLButton: 1 hour
- ConfirmDialog: 1 hour
- Empty state: 0.5 hours
- Integration and testing: 1.5 hours

## Definition of Done

- [ ] All endpoint management functions work end-to-end
- [ ] Clipboard copy works (test with HTTPS and localhost)
- [ ] Confirmation dialog prevents accidental deletions
- [ ] Loading states provide clear feedback
- [ ] Error states show helpful messages
- [ ] Empty state encourages first endpoint creation
- [ ] Keyboard navigation works (tab, enter, escape)
- [ ] Accessibility: ARIA labels, focus management
- [ ] Visual design matches PRD specifications
- [ ] No React warnings in console

## Notes

- Clipboard API requires HTTPS or localhost
- Consider optimistic updates (remove from UI before API confirms)
- Add keyboard shortcut: Cmd/Ctrl+K to create endpoint
- Consider showing request count badge on each endpoint
- Future: Add endpoint renaming (double-click to edit)
- Future: Drag-and-drop to reorder endpoints

## References

- Clipboard API: https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API
- ARIA Dialog: https://www.w3.org/WAI/ARIA/apg/patterns/dialog-modal/
