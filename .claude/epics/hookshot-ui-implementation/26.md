---
name: Core Layout & Theming
status: in-progress
created: 2026-01-30T08:03:38Z
updated: 2026-01-30T08:44:23Z
github: https://github.com/datlechin/hookshot/issues/26
depends_on: [25]
parallel: false
conflicts_with: []
---

# Task: Core Layout & Theming

## Description

Implement the 3-panel responsive layout (Header, Sidebar, RequestList, DetailPanel) and complete dark/light mode theming system. This task establishes the visual structure and appearance of the entire application, with responsive breakpoints and theme persistence.

**Scope:**
- Create Header component with logo, actions, theme toggle
- Build Sidebar component for endpoint list
- Implement RequestList middle panel
- Create DetailPanel for request inspection
- Implement dark/light mode with CSS variables
- Add responsive breakpoints (3-panel → 2-panel → single-panel)
- Implement theme toggle with localStorage persistence

## Acceptance Criteria

- [ ] 3-panel layout renders correctly on screens >1400px wide
- [ ] 2-panel layout (collapsed sidebar) on screens 1024-1400px
- [ ] Single-panel mobile view on screens <1024px
- [ ] Dark mode is default on first visit
- [ ] Light mode toggle works instantly without flicker
- [ ] Theme preference persists in localStorage
- [ ] System preference detection works on first visit
- [ ] All panels are scrollable independently
- [ ] Header is fixed/sticky at top
- [ ] Layout is responsive and looks good at all breakpoints
- [ ] Empty states render in all panels

## Technical Details

### Component Structure

1. **App.tsx** - Main layout orchestration
   ```typescript
   function App() {
     const { theme } = useTheme();

     return (
       <div className={theme}>
         <div className="min-h-screen bg-background text-text-primary">
           <Header />
           <div className="flex h-[calc(100vh-64px)]">
             <Sidebar />
             <RequestList />
             <DetailPanel />
           </div>
         </div>
       </div>
     );
   }
   ```

2. **Header Component** (`components/layout/Header.tsx`)
   - Logo/branding (left)
   - "Create Endpoint" button (center/right)
   - Theme toggle button (right)
   - Connection status indicator (right)
   - Fixed height: 64px
   - Border bottom in light mode, subtle in dark mode

3. **Sidebar Component** (`components/layout/Sidebar.tsx`)
   - Width: 280px on desktop, collapsible on tablet
   - Scrollable endpoint list
   - Empty state: "No endpoints yet. Create one to get started."
   - Border right
   - Background: surface color

4. **RequestList Component** (`components/layout/RequestList.tsx`)
   - Flexible width (takes remaining space)
   - Header with filters and search
   - Scrollable list area
   - Empty state: "No requests captured. Waiting for webhooks..."
   - Min width: 400px

5. **DetailPanel Component** (`components/layout/DetailPanel.tsx`)
   - Width: 480px on desktop, full width on mobile
   - Collapsible/closable
   - Tabbed interface (implemented in next task)
   - Scrollable content area
   - Close button (X) in top-right

### Theme Implementation

1. **useTheme Hook** (`hooks/useTheme.ts`)
   ```typescript
   export function useTheme() {
     const [theme, setTheme] = useState<'dark' | 'light'>(() => {
       // Check localStorage first
       const stored = localStorage.getItem('theme');
       if (stored) return stored as 'dark' | 'light';

       // Check system preference
       if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
         return 'dark';
       }
       return 'dark'; // Default to dark
     });

     useEffect(() => {
       localStorage.setItem('theme', theme);
       document.documentElement.classList.toggle('dark', theme === 'dark');
     }, [theme]);

     const toggleTheme = () => {
       setTheme(t => t === 'dark' ? 'light' : 'dark');
     };

     return { theme, toggleTheme };
   }
   ```

2. **CSS Variables** (in `src/index.css`)
   ```css
   @layer base {
     :root {
       /* Light mode */
       --background: #ffffff;
       --surface: #f9fafb;
       --surface-hover: #f3f4f6;
       --border: #e5e7eb;
       --text-primary: #111827;
       --text-secondary: #6b7280;
       --text-tertiary: #9ca3af;
       --accent-blue: #3b82f6;
       --accent-green: #10b981;
       --accent-red: #ef4444;
       --accent-yellow: #f59e0b;
       --accent-purple: #8b5cf6;
     }

     .dark {
       /* Dark mode */
       --background: #0a0a0a;
       --surface: #1a1a1a;
       --surface-hover: #2a2a2a;
       --border: #333333;
       --text-primary: #e5e5e5;
       --text-secondary: #a1a1a1;
       --text-tertiary: #6b7280;
       /* Accents stay the same */
     }
   }
   ```

3. **Theme Toggle Button**
   - Icon: Sun for light mode, Moon for dark mode
   - Smooth transition animation
   - Tooltip: "Toggle theme"
   - Accessible (ARIA label)

### Responsive Breakpoints

Use Tailwind breakpoints:
```typescript
// In tailwind.config.js
module.exports = {
  theme: {
    screens: {
      'sm': '640px',
      'md': '768px',
      'lg': '1024px',  // 2-panel starts here
      'xl': '1280px',
      '2xl': '1536px', // 3-panel starts at 1400px custom
    }
  }
}
```

Layout classes:
```tsx
<div className="flex">
  {/* Sidebar: hidden on mobile, visible on lg+ */}
  <aside className="hidden lg:block w-70">
    <Sidebar />
  </aside>

  {/* RequestList: full width on mobile, flex on lg+ */}
  <main className="flex-1 min-w-0">
    <RequestList />
  </main>

  {/* DetailPanel: full screen on mobile, fixed width on xl+ */}
  <aside className="fixed lg:relative w-full lg:w-[480px]">
    <DetailPanel />
  </aside>
</div>
```

### Empty States

Create reusable EmptyState component:
```typescript
interface EmptyStateProps {
  icon: ReactNode;
  title: string;
  description: string;
  action?: ReactNode;
}

function EmptyState({ icon, title, description, action }: EmptyStateProps) {
  return (
    <div className="flex flex-col items-center justify-center h-full text-center p-8">
      <div className="text-text-tertiary mb-4">{icon}</div>
      <h3 className="text-lg font-semibold text-text-primary mb-2">{title}</h3>
      <p className="text-text-secondary mb-4 max-w-sm">{description}</p>
      {action}
    </div>
  );
}
```

## Dependencies

### Blocking Dependencies
- [ ] Task 001: Project Setup & Infrastructure (must complete first)

### External Dependencies
- [ ] Icons library (lucide-react recommended, lightweight)
  ```bash
  npm install lucide-react
  ```

## Effort Estimate

- **Size:** Medium (M)
- **Hours:** 8-10 hours
- **Parallel:** false (depends on Task 001)

**Breakdown:**
- Header component: 1.5 hours
- Sidebar component: 1.5 hours
- RequestList component: 1.5 hours
- DetailPanel component: 1.5 hours
- useTheme hook: 1 hour
- Responsive breakpoints: 1.5 hours
- Empty states: 0.5 hours
- Testing and refinement: 1.5 hours

## Definition of Done

- [ ] All layout components render without errors
- [ ] Theme toggle works smoothly
- [ ] Theme persists across page reloads
- [ ] Responsive layout tested at 1920px, 1280px, 1024px, 768px, 375px
- [ ] Empty states display correctly in all panels
- [ ] No layout shift when toggling theme
- [ ] Accessibility: keyboard navigation works, focus indicators visible
- [ ] Code is TypeScript strict mode compliant
- [ ] Components are documented with JSDoc comments
- [ ] No console errors or warnings

## Notes

- Use CSS Grid or Flexbox for layout (Flexbox recommended for simplicity)
- Ensure panels have `overflow-y: auto` for independent scrolling
- Consider using `sticky` positioning for headers within panels
- Test theme toggle on system dark mode vs light mode users
- Add transition classes for smooth theme switching:
  ```css
  * {
    @apply transition-colors duration-200;
  }
  ```
- Mobile: Consider bottom navigation for panel switching

## References

- Tailwind Responsive Design: https://tailwindcss.com/docs/responsive-design
- Dark Mode Guide: https://tailwindcss.com/docs/dark-mode
- lucide-react Icons: https://lucide.dev/icons/
