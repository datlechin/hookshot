---
name: Add keyboard shortcuts
status: open
created: 2026-01-30T04:35:06Z
updated: 2026-01-30T04:35:06Z
github: [Will be updated when synced to GitHub]
depends_on: [003, 004, 007]
parallel: true
conflicts_with: []
---

# Task: Add Keyboard Shortcuts

## Description

Implement keyboard shortcuts for common actions to improve developer experience. Include j/k navigation, / for search, ESC to close modals, and a help overlay showing available shortcuts.

## Acceptance Criteria

- [x] j/k keys navigate request list (down/up)
- [x] / key focuses search input
- [x] ESC key closes modals and clears search
- [x] Enter key opens selected request details
- [x] ? key shows keyboard shortcuts help overlay
- [x] Shortcuts don't interfere with input fields
- [x] Visual indicator for current selection

## Technical Details

### 1. Global Keyboard Handler

**File: `frontend/src/hooks/useKeyboardShortcuts.ts`**

```tsx
import { useEffect } from 'react'

interface Shortcuts {
  [key: string]: (event: KeyboardEvent) => void
}

export function useKeyboardShortcuts(shortcuts: Shortcuts, enabled = true) {
  useEffect(() => {
    if (!enabled) return

    const handleKeyDown = (event: KeyboardEvent) => {
      // Ignore if user is typing in input/textarea
      const target = event.target as HTMLElement
      if (
        target.tagName === 'INPUT' ||
        target.tagName === 'TEXTAREA' ||
        target.isContentEditable
      ) {
        // Exception: ESC should still work
        if (event.key !== 'Escape') return
      }

      const handler = shortcuts[event.key]
      if (handler) {
        event.preventDefault()
        handler(event)
      }
    }

    document.addEventListener('keydown', handleKeyDown)
    return () => document.removeEventListener('keydown', handleKeyDown)
  }, [shortcuts, enabled])
}
```

### 2. Request List Navigation

**File: `frontend/src/pages/EndpointView.tsx`** (or wherever request list lives)

```tsx
import { useState } from 'react'
import { useKeyboardShortcuts } from '@/hooks/useKeyboardShortcuts'

export function EndpointView() {
  const [requests, setRequests] = useState<Request[]>([])
  const [selectedIndex, setSelectedIndex] = useState(0)
  const [showRequestDetail, setShowRequestDetail] = useState(false)
  const [showHelp, setShowHelp] = useState(false)

  useKeyboardShortcuts({
    'j': () => {
      // Navigate down
      setSelectedIndex((prev) => Math.min(prev + 1, requests.length - 1))
    },
    'k': () => {
      // Navigate up
      setSelectedIndex((prev) => Math.max(prev - 1, 0))
    },
    'Enter': () => {
      // Open selected request
      if (requests[selectedIndex]) {
        setShowRequestDetail(true)
      }
    },
    '/': () => {
      // Focus search input
      document.getElementById('search-input')?.focus()
    },
    'Escape': () => {
      // Close modal or clear search
      setShowRequestDetail(false)
      setShowHelp(false)
      const searchInput = document.getElementById('search-input') as HTMLInputElement
      if (searchInput) searchInput.value = ''
    },
    '?': () => {
      // Show help overlay
      setShowHelp(!showHelp)
    },
  })

  return (
    <div>
      <RequestList
        requests={requests}
        selectedIndex={selectedIndex}
        onSelect={setSelectedIndex}
      />
      {showRequestDetail && (
        <RequestDetail
          request={requests[selectedIndex]}
          onClose={() => setShowRequestDetail(false)}
        />
      )}
      {showHelp && <KeyboardHelpOverlay onClose={() => setShowHelp(false)} />}
    </div>
  )
}
```

### 3. Keyboard Help Overlay

**File: `frontend/src/components/KeyboardHelpOverlay.tsx`**

```tsx
import { Modal } from '@/components/ui'

interface Shortcut {
  keys: string[]
  description: string
}

const shortcuts: Shortcut[] = [
  { keys: ['j', '↓'], description: 'Next request' },
  { keys: ['k', '↑'], description: 'Previous request' },
  { keys: ['Enter'], description: 'Open request details' },
  { keys: ['/'], description: 'Focus search' },
  { keys: ['Esc'], description: 'Close modal / Clear search' },
  { keys: ['?'], description: 'Show this help' },
]

interface KeyboardHelpOverlayProps {
  onClose: () => void
}

export function KeyboardHelpOverlay({ onClose }: KeyboardHelpOverlayProps) {
  return (
    <Modal isOpen onClose={onClose} title="Keyboard Shortcuts" size="sm">
      <div className="space-y-3">
        {shortcuts.map((shortcut, i) => (
          <div key={i} className="flex items-center justify-between">
            <div className="flex gap-2">
              {shortcut.keys.map((key) => (
                <kbd
                  key={key}
                  className="px-2 py-1 bg-[var(--bg-primary)] border border-[var(--border)] rounded text-xs font-mono"
                >
                  {key}
                </kbd>
              ))}
            </div>
            <div className="text-sm text-[var(--text-secondary)]">
              {shortcut.description}
            </div>
          </div>
        ))}
      </div>
    </Modal>
  )
}
```

### 4. Visual Selection Indicator

Update RequestListItem to show selected state:

```tsx
<div
  className={`
    request-item
    ${isSelected ? 'bg-[var(--bg-hover)] border-l-2 border-[var(--accent)]' : ''}
  `}
>
  {/* Content */}
</div>
```

### 5. Search Input Integration

**File: `frontend/src/components/SearchInput.tsx`**

```tsx
export function SearchInput({ value, onChange }: SearchInputProps) {
  return (
    <div className="relative">
      <input
        id="search-input"
        type="text"
        value={value}
        onChange={onChange}
        placeholder="Search requests... (press / to focus)"
        className="w-full px-4 py-2 bg-[var(--bg-secondary)] border border-[var(--border)] rounded font-mono text-sm"
      />
      <kbd className="absolute right-2 top-2 px-2 py-1 bg-[var(--bg-primary)] border border-[var(--border)] rounded text-xs">
        /
      </kbd>
    </div>
  )
}
```

## Implementation Steps

1. Create useKeyboardShortcuts hook
2. Implement j/k navigation in request list
3. Add / key to focus search
4. Add ESC key to close modals
5. Add Enter key to open details
6. Create KeyboardHelpOverlay component
7. Add ? key to toggle help
8. Add visual selection indicator
9. Test all shortcuts work
10. Test shortcuts don't interfere with inputs

## Dependencies

- [x] Task 003 complete (Modal component)
- [x] Task 004 complete (Modal in use)
- [x] Task 007 complete (Request list with selection)

## Effort Estimate

- **Size**: M
- **Hours**: 5-6 hours
- **Parallel**: ✅ Yes - Can run after Tasks 003, 004, 007

## Definition of Done

- [x] All keyboard shortcuts working
- [x] j/k navigation smooth and responsive
- [x] / focuses search without typing /
- [x] ESC closes modals
- [x] Enter opens request details
- [x] ? shows help overlay
- [x] Shortcuts ignored in input fields
- [x] Visual selection indicator clear
- [x] Help overlay shows all shortcuts
- [x] Committed to version control
